---
title: "„Ç≥„Éû„É≥„Éâ„Éó„É≠„É≥„Éó„Éà„Å´containerÂêç„ÇíË°®Á§∫„Åô„Çã"
emoji: "üê≥ "
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics: ["docker", "shell", "bash"]
published: true
---

## `docker exec` „Åó„ÅüÊôÇ„ÄÅcontainer„ÅåÂàÜ„Åã„Çâ„Å™„Åè„Å™„Çã

containerÂÜÖ„Åß‰ΩúÊ•≠„Åô„ÇãÊôÇ„Å´„ÄÅ‰ªä„Å©„ÅÆContainer„Åß‰ΩúÊ•≠„Åó„Å¶„ÅÑ„Çã„ÅãÊòéÁ§∫„Åó„Åü„ÅÑ„Åß„Åô„ÄÇ
„Ç∞„Ç∞„Å£„Å¶„Åø„Åü„ÅÆ„Åß„Åô„Åå„ÅÑ„ÅÑËß£Ê±∫ÊñπÊ≥ï„Åå„Å™„ÅèËá™ÂàÜ„Å™„Çä„ÅÆËêΩ„Å®„ÅóÊâÄ„Åå„Åø„Å§„Åã„Å£„Åü„ÅÆ„ÅßÁ¥π‰ªã„Åó„Åæ„Åô„ÄÇ

![shell](/images/docker.gif)
*Âãï‰Ωú„Ç§„É°„Éº„Ç∏*

## Ëß£Ê±∫Ê≥ï

### Version

`docker version`„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„Å¶`API version > 1.25`„Åß„ÅÇ„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ

```bash
docker version
# output
#Client: Docker Engine - Community
# Version:           20.10.17
# API version:       1.41
# ~~~
```

### ÊñπÈáù

`docker exec`„Å´„ÅØ`-e`„Ç™„Éó„Ç∑„Éß„É≥„ÅßÁí∞Â¢ÉÂ§âÊï∞„Çí‰∏é„Åà„Çã„Åì„Å®„ÅåÂá∫Êù•„Çã„ÅÆ„ÅßÁâπÂÆö„ÅÆÁí∞Â¢ÉÂ§âÊï∞„Åå„ÅÇ„Çã„Å®„Åç„Å´„ÄÅ`PS1`„ÇíÊõ∏„ÅçÊõø„Åà„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ

### Ê∫ñÂÇô

‰∏ãË®ò„ÅÆ„Çà„ÅÜ„Å´shellËµ∑ÂãïÊôÇ„Å´Ë™≠„Åø„Åì„Åæ„Çå„Çã„Éï„Ç°„Ç§„É´„ÇíÁ∑®ÈõÜ„Åó„Å¶ÁâπÂÆö„ÅÆÁí∞Â¢ÉÂ§âÊï∞„Åå„ÅÇ„Çã„Å®„Åç„Å´Ë™≠„ÅøËæº„Åæ„Çå„Çã`PS1`„ÇíÁî®ÊÑè„Åó„Åæ„Åô„ÄÇ

```bash:.bashrc
# ~~~
if [[ -n "$DOCKER_CONTAINER_NAME" ]]; then
    PS1="üê≥ \e[0;34m$DOCKER_CONTAINER_NAME\e[0m \w "
else
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi
# ~~~
```

Áî®ÊÑè„Åó„Åü„ÄÅ`.bashrc`„ÇícontainerËµ∑ÂãïÊôÇ„Å´„Éû„Ç¶„É≥„Éà„Åó„Åæ„Åô„ÄÇ

```yaml:dockoer-compose.yaml
# ~~~
    volumes:
      - ~/.bashrc:/home/test/.bashrc
# ~~~
```

„Ç≥„É≥„ÉÜ„Éä„Å´ÂÖ•„Çã„Å®„Åç„Å´„ÄÅÁí∞Â¢ÉÂ§âÊï∞„ÇíÊåáÂÆö„Åó„Åæ„Åô„ÄÇ

```bash
docker exec -it -e DOCKER_CONTAINER_NAME=TEST test bash
```

## „Åæ„Å®„ÇÅ

`docker exec`„Åß„Ç≥„É≥„ÉÜ„Éä„ÅÆÂêçÂâç„ÇíÁ¢∫Ë™ç„Åô„Çã„Åü„ÇÅ„ÅÆTips„ÇíÁ¥π‰ªã„Åó„Åæ„Åó„Åü„ÄÇ

## ÂèÇËÄÉ

- https://www.maxivanov.io/add-docker-container-name-to-shell-prompt/
- [Github Gist](https://gist.github.com/caad1229/f6c64ef41d58f15f5148)

## ÊúÄÂæå„Å´

Ëá™ÂàÜ„ÅÆË®≠ÂÆö„ÇíÁ¥π‰ªã„Åó„Åæ„Åô„ÄÇ
git„ÅÆbranch„ÇÇË°®Á§∫„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

```bash: .bash_aliases
#----
function parse_git_branch {
    git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ [\1]/'
}
function promps {
    local  BLUE="\[\e[1;34m\]"
    local  RED="\[\e[1;31m\]"
    local  GREEN="\[\e[1;32m\]"
    local  YELLOW="\[\e[1;33m\]"
    local  WHITE="\[\e[00m\]"
    local  GRAY="\[\e[1;37m\]"

    case $TERM in
        xterm*) TITLEBAR='\[\e]0;\W\007\]';;
        *)      TITLEBAR="";;
    esac
    local BASE="\u@\h"
    if [[ -n "$DOCKER_CONTAINER_NAME" ]]; then
        PS1="üê≥ \e[0;34m$DOCKER_CONTAINER_NAME\e[0m \w ${RED}\$(parse_git_branch)${BLUE}\$${WHITE} \n"
    else
        PS1="${TITLEBAR}${GREEN}${BASE}${WHITE}:${BLUE}\w${RED}\$(parse_git_branch)${BLUE}\$${WHITE} \n"
    fi
}
promps
```
