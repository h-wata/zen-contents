---
title: "ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«containeråã‚’è¡¨ç¤ºã™ã‚‹"
emoji: "ğŸ³ "
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["docker", "shell", "bash"]
published: false
---

## `docker exec` ã—ãŸæ™‚ã€containerãŒåˆ†ã‹ã‚‰ãªããªã‚‹

containerå†…ã§ä½œæ¥­ã™ã‚‹æ™‚ã«ã€ä»Šã©ã®Containerã§ä½œæ¥­ã—ã¦ã„ã‚‹ã‹æ˜ç¤ºã—ãŸã„ã§ã™ã€‚
ã‚°ã‚°ã£ã¦ã¿ãŸã®ã§ã™ãŒã„ã„è§£æ±ºæ–¹æ³•ãŒãªãè‡ªåˆ†ãªã‚Šã®è½ã¨ã—æ‰€ãŒã¿ã¤ã‹ã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚

![shell](/images/docker.gif)
*å‹•ä½œã‚¤ãƒ¡ãƒ¼ã‚¸*

## Version

`docker version`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦`API version > 1.25`ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚

```bash
docker version
# output
#Client: Docker Engine - Community
# Version:           20.10.17
# API version:       1.41
# ~~~
```

## è§£æ±ºæ³•

`docker exec`ã«ã¯`-e`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ç’°å¢ƒå¤‰æ•°ã‚’ä¸ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã®ã§ç‰¹å®šã®ç’°å¢ƒå¤‰æ•°ãŒã‚ã‚‹ã¨ãã«ã€`PS1`ã‚’æ›¸ãæ›¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

ä¸‹è¨˜ã®ã‚ˆã†ã«shellèµ·å‹•æ™‚ã«èª­ã¿ã“ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ç‰¹å®šã®ç’°å¢ƒå¤‰æ•°ãŒã‚ã‚‹ã¨ãã«èª­ã¿è¾¼ã¾ã‚Œã‚‹`PS1`ã‚’ç”¨æ„ã™ã‚‹ã€‚

```bash:.bashrc
# ~~~
if [[ -n "$DOCKER_CONTAINER_NAME" ]]; then
    PS1="ğŸ³ \e[0;34m$DOCKER_CONTAINER_NAME\e[0m \w "
else
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi
# ~~~
```
ç”¨æ„ã—ãŸã€`.bashrc`ã‚’containerèµ·å‹•æ™‚ã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚

```yaml:dockoer-compose.yaml
# ~~~
    volumes:
      - ~/.bashrc:/home/test/.bashrc
# ~~~
```

ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹ã¨ãã«ã€ç’°å¢ƒå¤‰æ•°ã‚’æŒ‡å®šã™ã‚‹ã€‚
```bash
docker exec -it -e DOCKER_CONTAINER_NAME=TEST test bash
```
